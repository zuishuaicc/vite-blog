import{_ as i,c as a,o as n,ag as l}from"./chunks/framework.LkKBe053.js";const d=JSON.parse('{"title":"多行文本展开收起的实现方式","description":"","frontmatter":{"outline":"deep"},"headers":[],"relativePath":"views/frontend/ellipsis-text.md","filePath":"views/frontend/ellipsis-text.md","lastUpdated":1761407378000}'),h={name:"views/frontend/ellipsis-text.md"};function k(p,s,t,D,F,e){return n(),a("div",null,[...s[0]||(s[0]=[l(`<h1 id="多行文本展开收起的实现方式" tabindex="-1">多行文本展开收起的实现方式 <a class="header-anchor" href="#多行文本展开收起的实现方式" aria-label="Permalink to &quot;多行文本展开收起的实现方式&quot;">​</a></h1><h2 id="一、基于-webkit-line-clamp-的实现" tabindex="-1">一、基于-webkit-line-clamp 的实现 <a class="header-anchor" href="#一、基于-webkit-line-clamp-的实现" aria-label="Permalink to &quot;一、基于-webkit-line-clamp 的实现&quot;">​</a></h2><h3 id="原理" tabindex="-1">原理： <a class="header-anchor" href="#原理" aria-label="Permalink to &quot;原理：&quot;">​</a></h3><p>核心就是 -webkit-line-clamp 属性，使用 -webkit-line-clamp 来截断行数，具体 css 代码就是下面这个:</p><div class="language-css vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">css</span><pre class="shiki shiki-themes material-theme-palenight material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#FFCB6B;--shiki-dark:#FFCB6B;">div</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#B2CCD6;--shiki-dark:#B2CCD6;">  display</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> -webkit-box</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">;</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> // 弹性伸缩盒子模型</span></span>
<span class="line"><span style="--shiki-light:#FFCB6B;--shiki-dark:#FFCB6B;">  -webkit-box-orient</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> vertical</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">;</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> // 从顶部向底部垂直布置子元素</span></span>
<span class="line"><span style="--shiki-light:#B2CCD6;--shiki-dark:#B2CCD6;">  overflow</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> hidden</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">;</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> // 隐藏文本溢出内容</span></span>
<span class="line"><span style="--shiki-light:#FFCB6B;--shiki-dark:#FFCB6B;">  -webkit-line-clamp</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#F78C6C;--shiki-dark:#F78C6C;"> 3</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">;</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> // 截断行数</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="实现过程" tabindex="-1">实现过程 <a class="header-anchor" href="#实现过程" aria-label="Permalink to &quot;实现过程&quot;">​</a></h3><ol><li>设置省略样式，动态传入行数来控制文本截断的行数</li></ol><div class="language-vue vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki shiki-themes material-theme-palenight material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&lt;</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">template</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">  &lt;</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">div</span><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;"> class</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#C3E88D;--shiki-dark:#C3E88D;">text-ellipsis</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">    &lt;</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">div</span><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;"> ref</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#C3E88D;--shiki-dark:#C3E88D;">contentEl</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;"> class</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#C3E88D;--shiki-dark:#C3E88D;">text-ellipsis-content</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> :</span><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;">style</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">{ </span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&#39;</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">-webkit-line-clamp</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&#39;</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">: </span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">isExpand</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> ? </span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&#39;</span><span style="--shiki-light:#C3E88D;--shiki-dark:#C3E88D;">unset</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&#39;</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> : </span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">rows</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> }</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">      {{</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> content </span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">}}</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">    &lt;/</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">div</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">  &lt;/</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">div</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&lt;/</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">template</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&lt;</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">style</span><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;"> scoped</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#FFCB6B;--shiki-dark:#FFCB6B;">text-ellipsis-content</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#B2CCD6;--shiki-dark:#B2CCD6;">  display</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> -webkit-box</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#FFCB6B;--shiki-dark:#FFCB6B;">  -webkit-box-orient</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> vertical</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#B2CCD6;--shiki-dark:#B2CCD6;">  word-break</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> break-all</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#B2CCD6;--shiki-dark:#B2CCD6;">  overflow</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> hidden</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">}</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&lt;/</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">style</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><ol start="2"><li>js 判断文本是否溢出 容器的文本内容高度超过容器本身的高度, 就可以判断为文本溢出</li></ol><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes material-theme-palenight material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;">const</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> {</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> offsetHeight</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> scrollHeight </span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">}</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> =</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> contentEl</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">value</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">isEll</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">value </span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> scrollHeight </span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&gt;</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> offsetHeight</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ol start="3"><li>显示展开、收起</li></ol><div class="language-vue vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki shiki-themes material-theme-palenight material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&lt;</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">span</span><span style="--shiki-light:#89DDFF;--shiki-light-font-style:italic;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> v-if</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">isEll</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;"> class</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#C3E88D;--shiki-dark:#C3E88D;">text-ellipsis-action</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> @</span><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;">click</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">onActionClick</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&gt;</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">{{actionText}}</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&lt;/</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">span</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes material-theme-palenight material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;">const</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> actionText </span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#82AAFF;--shiki-dark:#82AAFF;"> computed</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">(</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">()</span><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;"> =&gt;</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-light-font-style:italic;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">  return</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> isExpand</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">value</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> ?</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> props</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">collapseText</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> :</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> props</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">expandText</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">}</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#676E95;--shiki-light-font-style:italic;--shiki-dark:#676E95;--shiki-dark-font-style:italic;">// 展开/收起点击</span></span>
<span class="line"><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;">function</span><span style="--shiki-light:#82AAFF;--shiki-dark:#82AAFF;"> onActionClick</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">()</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">  isExpand</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">value</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> =</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> !</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">isExpand</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">value</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ol start="4"><li><p>优点<br> 实现简单,兼容绝大多数主流浏览器，如果要兼容 ie 或者非主流浏览器另说</p></li><li><p>缺点<br> 展开收起无法跟在文本内容末尾,ie 和少数低版本浏览器兼容问题</p></li><li><p>详细代码</p></li></ol><div class="language-vue vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki shiki-themes material-theme-palenight material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&lt;</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">template</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">  &lt;</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">div</span><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;"> class</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#C3E88D;--shiki-dark:#C3E88D;">text-ellipsis</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">    &lt;</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">div</span><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;"> ref</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#C3E88D;--shiki-dark:#C3E88D;">contentEl</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;"> class</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#C3E88D;--shiki-dark:#C3E88D;">text-ellipsis-content</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> :</span><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;">style</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">{ </span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&#39;</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">-webkit-line-clamp</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&#39;</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">: </span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">isExpand</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> ? </span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&#39;</span><span style="--shiki-light:#C3E88D;--shiki-dark:#C3E88D;">unset</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&#39;</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> : </span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">rows</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> }</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">      {{</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> content </span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">}}</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">    &lt;/</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">div</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">    &lt;</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">span</span><span style="--shiki-light:#89DDFF;--shiki-light-font-style:italic;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> v-if</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">isEll</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;"> class</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#C3E88D;--shiki-dark:#C3E88D;">text-ellipsis-action</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> @</span><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;">click</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">onActionClick</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&gt;{{</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> actionText </span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">}}&lt;/</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">span</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">  &lt;/</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">div</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&lt;/</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">template</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&lt;</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">script</span><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;"> setup</span><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;"> lang</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#C3E88D;--shiki-dark:#C3E88D;">ts</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-light-font-style:italic;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">import</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> {</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> defineProps</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> ref</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> onBeforeMount</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> watch</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> computed</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> nextTick</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> }</span><span style="--shiki-light:#89DDFF;--shiki-light-font-style:italic;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> from</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#C3E88D;--shiki-dark:#C3E88D;">vue</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;">const</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> props </span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#82AAFF;--shiki-dark:#82AAFF;"> defineProps</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">(</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">{</span></span>
<span class="line"><span style="--shiki-light:#676E95;--shiki-light-font-style:italic;--shiki-dark:#676E95;--shiki-dark-font-style:italic;">  // 文本内容</span></span>
<span class="line"><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">  content</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">    type</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> String</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">,</span></span>
<span class="line"><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">    default</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> &quot;&quot;</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">,</span></span>
<span class="line"><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">    required</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#FF9CAC;--shiki-dark:#FF9CAC;"> true</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">,</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">  },</span></span>
<span class="line"><span style="--shiki-light:#676E95;--shiki-light-font-style:italic;--shiki-dark:#676E95;--shiki-dark-font-style:italic;">  // 省略行数</span></span>
<span class="line"><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">  rows</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">    type</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> Number</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">,</span></span>
<span class="line"><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">    default</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#F78C6C;--shiki-dark:#F78C6C;"> 5</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">,</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">  },</span></span>
<span class="line"><span style="--shiki-light:#676E95;--shiki-light-font-style:italic;--shiki-dark:#676E95;--shiki-dark-font-style:italic;">  // 展开文案</span></span>
<span class="line"><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">  expandText</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">    type</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> String</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">,</span></span>
<span class="line"><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">    default</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#C3E88D;--shiki-dark:#C3E88D;">展开</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">,</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">  },</span></span>
<span class="line"><span style="--shiki-light:#676E95;--shiki-light-font-style:italic;--shiki-dark:#676E95;--shiki-dark-font-style:italic;">  // 收起文案</span></span>
<span class="line"><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">  collapseText</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">    type</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> String</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">,</span></span>
<span class="line"><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">    default</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#C3E88D;--shiki-dark:#C3E88D;">收起</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">,</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">  },</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">}</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;">const</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> isEll </span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#82AAFF;--shiki-dark:#82AAFF;"> ref</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">(</span><span style="--shiki-light:#FF9CAC;--shiki-dark:#FF9CAC;">false</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">) </span><span style="--shiki-light:#676E95;--shiki-light-font-style:italic;--shiki-dark:#676E95;--shiki-dark-font-style:italic;">// 是否省略</span></span>
<span class="line"><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;">const</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> isExpand </span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#82AAFF;--shiki-dark:#82AAFF;"> ref</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">(</span><span style="--shiki-light:#FF9CAC;--shiki-dark:#FF9CAC;">false</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">) </span><span style="--shiki-light:#676E95;--shiki-light-font-style:italic;--shiki-dark:#676E95;--shiki-dark-font-style:italic;">// 是否展开</span></span>
<span class="line"><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;">const</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> contentEl </span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#82AAFF;--shiki-dark:#82AAFF;"> ref</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&lt;</span><span style="--shiki-light:#FFCB6B;--shiki-dark:#FFCB6B;">null</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> |</span><span style="--shiki-light:#FFCB6B;--shiki-dark:#FFCB6B;"> HTMLElement</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&gt;</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">(</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">null</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">) </span><span style="--shiki-light:#676E95;--shiki-light-font-style:italic;--shiki-dark:#676E95;--shiki-dark-font-style:italic;">// 容器dom</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;">const</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> actionText </span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#82AAFF;--shiki-dark:#82AAFF;"> computed</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">(</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">()</span><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;"> =&gt;</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-light-font-style:italic;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">  return</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> isExpand</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">value</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> ?</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> props</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">collapseText</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> :</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> props</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">expandText</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">}</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#676E95;--shiki-light-font-style:italic;--shiki-dark:#676E95;--shiki-dark-font-style:italic;">// 计算内容省略</span></span>
<span class="line"><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;">async</span><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;"> function</span><span style="--shiki-light:#82AAFF;--shiki-dark:#82AAFF;"> calcEll</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">()</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-light-font-style:italic;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">  await</span><span style="--shiki-light:#82AAFF;--shiki-dark:#82AAFF;"> nextTick</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">()</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-light-font-style:italic;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">  if</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;"> (</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">!</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">contentEl</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">value</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">) </span><span style="--shiki-light:#89DDFF;--shiki-light-font-style:italic;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">return</span></span>
<span class="line"><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;">  const</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> {</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> offsetHeight</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> scrollHeight</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> }</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> =</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> contentEl</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">value</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">  isEll</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">value</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> =</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> scrollHeight</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> &gt;</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> offsetHeight</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#676E95;--shiki-light-font-style:italic;--shiki-dark:#676E95;--shiki-dark-font-style:italic;">// 展开/收起点击</span></span>
<span class="line"><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;">function</span><span style="--shiki-light:#82AAFF;--shiki-dark:#82AAFF;"> onActionClick</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">()</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">  isExpand</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">value</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> =</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> !</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">isExpand</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">value</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#82AAFF;--shiki-dark:#82AAFF;">onBeforeMount</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">(</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">()</span><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;"> =&gt;</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#82AAFF;--shiki-dark:#82AAFF;">  calcEll</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">()</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">}</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#82AAFF;--shiki-dark:#82AAFF;">watch</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">(</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">()</span><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;"> =&gt;</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> [props</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">content</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> props</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">rows]</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> calcEll)</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&lt;/</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">script</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&lt;</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">style</span><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;"> lang</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#C3E88D;--shiki-dark:#C3E88D;">less</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;"> scoped</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">.text-ellipsis {</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">  white-space: pre-wrap;</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">}</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">.text-ellipsis-content {</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">  display: -webkit-box;</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">  -webkit-box-orient: vertical;</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">  word-break: break-all;</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">  overflow: hidden;</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">}</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">.text-ellipsis-action {</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">  color: #409eff;</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">  cursor: pointer;</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">  &amp;.is-block {</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">    display: block;</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">  }</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">  &amp;:hover {</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">    opacity: 0.85;</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">  }</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">}</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&lt;/</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">style</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br></div></div><h2 id="基于-max-height-的实现" tabindex="-1">基于 max-height 的实现 <a class="header-anchor" href="#基于-max-height-的实现" aria-label="Permalink to &quot;基于 max-height 的实现&quot;">​</a></h2><h3 id="实现过程-1" tabindex="-1">实现过程 <a class="header-anchor" href="#实现过程-1" aria-label="Permalink to &quot;实现过程&quot;">​</a></h3><ol><li>计算最大高度 max-height 内容设定的最大高度 max-height = 指定行数 row * 行高，如下：</li></ol><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes material-theme-palenight material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;">const</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> {</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> lineHeight </span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">}</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> =</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> window</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#82AAFF;--shiki-dark:#82AAFF;">getComputedStyle</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">(contentEl</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">value)</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">maxHeight</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">value </span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#82AAFF;--shiki-dark:#82AAFF;"> toNum</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">(lineHeight) </span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">*</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> props</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">rows</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ol start="2"><li>判断文本内容是否溢出 文本内容实际高度大于设定的最大高度（max-height）则为文本溢出，如下：</li></ol><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes material-theme-palenight material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">isEll</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">value </span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> contentEl</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">value</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">scrollHeight </span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&gt;</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> maxHeight</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">value</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ol start="3"><li>省略文本末尾添加省略符号 <code>...</code><br> 如何让省略符号显示在文本的右下角呢，此处我用的是浮动布局，因为浮动布局有环绕作用，而且不会影响文本内容的布局。<br> 首先要用到两个 span 标签，都向右边浮动。一个 span 的作用是占位符，向上撑起高度，而且它本身宽度为 0，不影响文本内容的自身的布局；第二个 span 为填充省略符号的容器，由于浮动的环绕作用，第二个 span 会撑起自身宽度，因为有第一个 span 撑起了高度使第二个 span 刚好处于文本末尾的位置。</li></ol><div class="language-vue vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki shiki-themes material-theme-palenight material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&lt;</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">template</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">  &lt;</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">div</span><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;"> ref</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#C3E88D;--shiki-dark:#C3E88D;">contentEl</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;"> class</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#C3E88D;--shiki-dark:#C3E88D;">text-ellipsis-content</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> :</span><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;">style</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">{ </span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">maxHeight</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">: </span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">isExpand</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> ? </span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&#39;</span><span style="--shiki-light:#C3E88D;--shiki-dark:#C3E88D;">none</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&#39;</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> : </span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">\`\${</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">maxHeight</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">}</span><span style="--shiki-light:#C3E88D;--shiki-dark:#C3E88D;">px</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">\`</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> }</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#676E95;--shiki-light-font-style:italic;--shiki-dark:#676E95;--shiki-dark-font-style:italic;">    &lt;!-- 占位符 --&gt;</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">    &lt;</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">span</span><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;"> class</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#C3E88D;--shiki-dark:#C3E88D;">text-ellipsis-placeholder</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> :</span><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;">style</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">{ </span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">height</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">: </span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">placeholderHeight</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> + </span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&#39;</span><span style="--shiki-light:#C3E88D;--shiki-dark:#C3E88D;">px</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&#39;</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> }</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&gt;&lt;/</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">span</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#676E95;--shiki-light-font-style:italic;--shiki-dark:#676E95;--shiki-dark-font-style:italic;">    &lt;!-- 省略符号 --&gt;</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">    &lt;</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">span</span><span style="--shiki-light:#89DDFF;--shiki-light-font-style:italic;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> v-if</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">isEll</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;"> ref</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#C3E88D;--shiki-dark:#C3E88D;">tailEl</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;"> class</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#C3E88D;--shiki-dark:#C3E88D;">text-ellipsis-tail</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&gt;</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> &lt;</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">span</span><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;"> class</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#C3E88D;--shiki-dark:#C3E88D;">text-ellipsis-dot</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#89DDFF;--shiki-light-font-style:italic;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> v-if</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">!</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">isExpand</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&gt;</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">...</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&lt;/</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">span</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&gt;</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> &lt;/</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">span</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">    &gt;{{</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> content </span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">}}</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">  &lt;/</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">div</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&lt;/</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">template</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&lt;</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">style</span><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;"> scoped</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#FFCB6B;--shiki-dark:#FFCB6B;">text-ellipsis-placeholder</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#B2CCD6;--shiki-dark:#B2CCD6;">  float</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> right</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">}</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#FFCB6B;--shiki-dark:#FFCB6B;">text-ellipsis-tail</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#B2CCD6;--shiki-dark:#B2CCD6;">  float</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> right</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#B2CCD6;--shiki-dark:#B2CCD6;">  clear</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> both</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">}</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&lt;/</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">style</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>如何让第一个占位符 span 撑起的高度恰好让省略符号的 span 刚好在文本右下角，其实不难，只要用整个容器高度减去省略符号的容器高度即可。</p><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes material-theme-palenight material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#89DDFF;--shiki-light-font-style:italic;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">if</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> (isEll</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">value) </span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">{</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-light-font-style:italic;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">  await</span><span style="--shiki-light:#82AAFF;--shiki-dark:#82AAFF;"> nextTick</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">()</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-light-font-style:italic;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">  if</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;"> (</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">tailEl</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">value</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">) </span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">{</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">    placeholderHeight</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">value</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> =</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> maxHeight</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">value</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> -</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> tailEl</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">value</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">offsetHeight</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">  }</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ol start="4"><li>增加展开、收起逻辑</li></ol><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes material-theme-palenight material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&lt;</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">span v</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">-</span><span style="--shiki-light:#89DDFF;--shiki-light-font-style:italic;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">if</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#C3E88D;--shiki-dark:#C3E88D;">isEll</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> ref</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#C3E88D;--shiki-dark:#C3E88D;">tailEl</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> class</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#C3E88D;--shiki-dark:#C3E88D;">text-ellipsis-tail</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">  &lt;</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">span class</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#C3E88D;--shiki-dark:#C3E88D;">text-ellipsis-dot</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> v</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">-</span><span style="--shiki-light:#89DDFF;--shiki-light-font-style:italic;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">if</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#C3E88D;--shiki-dark:#C3E88D;">!isExpand</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&gt;{{</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">dot</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">}}&lt;/</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">span</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&gt;</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">&lt;</span><span style="--shiki-light:#FFCB6B;--shiki-dark:#FFCB6B;">span</span><span style="--shiki-light:#FFCB6B;--shiki-dark:#FFCB6B;"> v</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">-</span><span style="--shiki-light:#FFCB6B;--shiki-dark:#FFCB6B;">if</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">=</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#C3E88D;--shiki-dark:#C3E88D;">!single</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#FFCB6B;--shiki-dark:#FFCB6B;"> class</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">=</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#C3E88D;--shiki-dark:#C3E88D;">text-ellipsis-action</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> @</span><span style="--shiki-light:#FFCB6B;--shiki-dark:#FFCB6B;">click</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">=</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#C3E88D;--shiki-dark:#C3E88D;">onActionClick</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">&gt;</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">{{</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">actionText</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">}}&lt;/</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">span</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&lt;/</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">span</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;">const</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> actionText </span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#82AAFF;--shiki-dark:#82AAFF;"> computed</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">(</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">()</span><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;"> =&gt;</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-light-font-style:italic;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">  return</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> isExpand</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">value</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> ?</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> props</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">collapseText</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> :</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> props</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">expandText</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">}</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">)</span></span>
<span class="line"><span style="--shiki-light:#676E95;--shiki-light-font-style:italic;--shiki-dark:#676E95;--shiki-dark-font-style:italic;">// 展开/收起点击</span></span>
<span class="line"><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;">function</span><span style="--shiki-light:#82AAFF;--shiki-dark:#82AAFF;"> onActionClick</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> ()</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">  isExpand</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">value</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> =</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> !</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">isExpand</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">value</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><ol start="5"><li>优点</li></ol><ul><li>没有兼容问题</li><li>省略号可以自定义</li><li>省略号可以跟随在省略文本末尾，也可以单独一行</li></ul><ol start="6"><li>缺点 火狐浏览器，如果设置文本内容为 white-space: pre-wrap; 时，text-align: justify; 两端对齐会失效，偶尔会导致省略号跟文本末尾出有一小段空白，有些小瑕疵，但不影响使用。</li><li>详细代码</li></ol><div class="language-vue vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki shiki-themes material-theme-palenight material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&lt;</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">template</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">  &lt;</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">div</span><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;"> class</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#C3E88D;--shiki-dark:#C3E88D;">text-ellipsis</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> :</span><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;">class</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">[!</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">isExpand</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> &amp;&amp; </span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&#39;</span><span style="--shiki-light:#C3E88D;--shiki-dark:#C3E88D;">un-expand</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&#39;</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">]</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">    &lt;</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">div</span><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;"> ref</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#C3E88D;--shiki-dark:#C3E88D;">contentEl</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;"> class</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#C3E88D;--shiki-dark:#C3E88D;">text-ellipsis-content</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> :</span><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;">style</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">{ </span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">maxHeight</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">: </span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">isExpand</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> ? </span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&#39;</span><span style="--shiki-light:#C3E88D;--shiki-dark:#C3E88D;">none</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&#39;</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> : </span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">\`\${</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">maxHeight</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">}</span><span style="--shiki-light:#C3E88D;--shiki-dark:#C3E88D;">px</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">\`</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> }</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#676E95;--shiki-light-font-style:italic;--shiki-dark:#676E95;--shiki-dark-font-style:italic;">      &lt;!-- 占位符 --&gt;</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">      &lt;</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">span</span><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;"> class</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#C3E88D;--shiki-dark:#C3E88D;">text-ellipsis-placeholder</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> :</span><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;">style</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">{ </span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">height</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">: </span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">placeholderHeight</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> + </span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&#39;</span><span style="--shiki-light:#C3E88D;--shiki-dark:#C3E88D;">px</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&#39;</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> }</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&gt;&lt;/</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">span</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#676E95;--shiki-light-font-style:italic;--shiki-dark:#676E95;--shiki-dark-font-style:italic;">      &lt;!-- 内容+操作按钮,不留空格 --&gt;</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">      {{</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> isExpand </span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">?</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> content </span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> &quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">      }}&lt;</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">span</span><span style="--shiki-light:#89DDFF;--shiki-light-font-style:italic;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> v-if</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">isEll</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;"> ref</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#C3E88D;--shiki-dark:#C3E88D;">tailEl</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;"> class</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#C3E88D;--shiki-dark:#C3E88D;">text-ellipsis-tail</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">        &lt;</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">span</span><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;"> class</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#C3E88D;--shiki-dark:#C3E88D;">text-ellipsis-dot</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#89DDFF;--shiki-light-font-style:italic;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> v-if</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">!</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">isExpand</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&gt;{{</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> dot </span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">}}&lt;/</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">span</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">        &gt;&lt;</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">span</span><span style="--shiki-light:#89DDFF;--shiki-light-font-style:italic;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> v-if</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">!</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">single</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;"> class</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#C3E88D;--shiki-dark:#C3E88D;">text-ellipsis-action</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> @</span><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;">click</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">onActionClick</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&gt;{{</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> actionText </span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">}}&lt;/</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">span</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&gt;</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> &lt;/</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">span</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">      &gt;{{</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> isExpand </span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">?</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> &quot;&quot;</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> :</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> content </span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">}}</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">    &lt;/</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">div</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">    &lt;</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">span</span><span style="--shiki-light:#89DDFF;--shiki-light-font-style:italic;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> v-if</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">single</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> &amp;&amp; </span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">isEll</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;"> class</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#C3E88D;--shiki-dark:#C3E88D;">text-ellipsis-action</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> @</span><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;">click</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">onActionClick</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&gt;{{</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> actionText </span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">}}&lt;/</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">span</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">  &lt;/</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">div</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&lt;/</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">template</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&lt;</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">script</span><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;"> setup</span><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;"> lang</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#C3E88D;--shiki-dark:#C3E88D;">ts</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-light-font-style:italic;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">import</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> {</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> defineProps</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> defineExpose</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> ref</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> onBeforeMount</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> watch</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> computed</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> nextTick</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> }</span><span style="--shiki-light:#89DDFF;--shiki-light-font-style:italic;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> from</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#C3E88D;--shiki-dark:#C3E88D;">vue</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;">const</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> props </span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#82AAFF;--shiki-dark:#82AAFF;"> defineProps</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">(</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">{</span></span>
<span class="line"><span style="--shiki-light:#676E95;--shiki-light-font-style:italic;--shiki-dark:#676E95;--shiki-dark-font-style:italic;">  // 文本内容</span></span>
<span class="line"><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">  content</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">    type</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> String</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">,</span></span>
<span class="line"><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">    default</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> &quot;&quot;</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">,</span></span>
<span class="line"><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">    required</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#FF9CAC;--shiki-dark:#FF9CAC;"> true</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">,</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">  },</span></span>
<span class="line"><span style="--shiki-light:#676E95;--shiki-light-font-style:italic;--shiki-dark:#676E95;--shiki-dark-font-style:italic;">  // 省略行数</span></span>
<span class="line"><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">  rows</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">    type</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> Number</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">,</span></span>
<span class="line"><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">    default</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#F78C6C;--shiki-dark:#F78C6C;"> 5</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">,</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">  },</span></span>
<span class="line"><span style="--shiki-light:#676E95;--shiki-light-font-style:italic;--shiki-dark:#676E95;--shiki-dark-font-style:italic;">  // 展开文案</span></span>
<span class="line"><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">  expandText</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">    type</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> String</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">,</span></span>
<span class="line"><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">    default</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#C3E88D;--shiki-dark:#C3E88D;">展开</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">,</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">  },</span></span>
<span class="line"><span style="--shiki-light:#676E95;--shiki-light-font-style:italic;--shiki-dark:#676E95;--shiki-dark-font-style:italic;">  // 收起文案</span></span>
<span class="line"><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">  collapseText</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">    type</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> String</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">,</span></span>
<span class="line"><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">    default</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#C3E88D;--shiki-dark:#C3E88D;">收起</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">,</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">  },</span></span>
<span class="line"><span style="--shiki-light:#676E95;--shiki-light-font-style:italic;--shiki-dark:#676E95;--shiki-dark-font-style:italic;">  // 省略点</span></span>
<span class="line"><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">  dot</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">    type</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> String</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">,</span></span>
<span class="line"><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">    default</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#C3E88D;--shiki-dark:#C3E88D;">...</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">,</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">  },</span></span>
<span class="line"><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">  single</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">    type</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> Boolean</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">,</span></span>
<span class="line"><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">    default</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#FF9CAC;--shiki-dark:#FF9CAC;"> false</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">,</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">  },</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">}</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;">const</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> isEll </span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#82AAFF;--shiki-dark:#82AAFF;"> ref</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">(</span><span style="--shiki-light:#FF9CAC;--shiki-dark:#FF9CAC;">false</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">) </span><span style="--shiki-light:#676E95;--shiki-light-font-style:italic;--shiki-dark:#676E95;--shiki-dark-font-style:italic;">// 是否省略</span></span>
<span class="line"><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;">const</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> isExpand </span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#82AAFF;--shiki-dark:#82AAFF;"> ref</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">(</span><span style="--shiki-light:#FF9CAC;--shiki-dark:#FF9CAC;">false</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">) </span><span style="--shiki-light:#676E95;--shiki-light-font-style:italic;--shiki-dark:#676E95;--shiki-dark-font-style:italic;">// 是否展开</span></span>
<span class="line"><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;">const</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> contentEl </span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#82AAFF;--shiki-dark:#82AAFF;"> ref</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&lt;</span><span style="--shiki-light:#FFCB6B;--shiki-dark:#FFCB6B;">null</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> |</span><span style="--shiki-light:#FFCB6B;--shiki-dark:#FFCB6B;"> HTMLElement</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&gt;</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">(</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">null</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">) </span><span style="--shiki-light:#676E95;--shiki-light-font-style:italic;--shiki-dark:#676E95;--shiki-dark-font-style:italic;">// 容器dom</span></span>
<span class="line"><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;">const</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> tailEl </span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#82AAFF;--shiki-dark:#82AAFF;"> ref</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&lt;</span><span style="--shiki-light:#FFCB6B;--shiki-dark:#FFCB6B;">null</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> |</span><span style="--shiki-light:#FFCB6B;--shiki-dark:#FFCB6B;"> HTMLElement</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&gt;</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">(</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">null</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">) </span><span style="--shiki-light:#676E95;--shiki-light-font-style:italic;--shiki-dark:#676E95;--shiki-dark-font-style:italic;">// 操作按钮dom</span></span>
<span class="line"><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;">const</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> placeholderHeight </span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#82AAFF;--shiki-dark:#82AAFF;"> ref</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">(</span><span style="--shiki-light:#F78C6C;--shiki-dark:#F78C6C;">0</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">) </span><span style="--shiki-light:#676E95;--shiki-light-font-style:italic;--shiki-dark:#676E95;--shiki-dark-font-style:italic;">// 占位符高度</span></span>
<span class="line"><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;">const</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> maxHeight </span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#82AAFF;--shiki-dark:#82AAFF;"> ref</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">(</span><span style="--shiki-light:#F78C6C;--shiki-dark:#F78C6C;">0</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">) </span><span style="--shiki-light:#676E95;--shiki-light-font-style:italic;--shiki-dark:#676E95;--shiki-dark-font-style:italic;">// 最大高度</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;">const</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> actionText </span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#82AAFF;--shiki-dark:#82AAFF;"> computed</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">(</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">()</span><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;"> =&gt;</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-light-font-style:italic;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">  return</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> isExpand</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">value</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> ?</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> props</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">collapseText</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> :</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> props</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">expandText</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">}</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;">function</span><span style="--shiki-light:#82AAFF;--shiki-dark:#82AAFF;"> toNum</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#BABED8;--shiki-light-font-style:italic;--shiki-dark:#BABED8;--shiki-dark-font-style:italic;">val</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#FFCB6B;--shiki-dark:#FFCB6B;"> any</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">):</span><span style="--shiki-light:#FFCB6B;--shiki-dark:#FFCB6B;"> number</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-light-font-style:italic;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">  if</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;"> (</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">!</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">val</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">) </span><span style="--shiki-light:#89DDFF;--shiki-light-font-style:italic;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">return</span><span style="--shiki-light:#F78C6C;--shiki-dark:#F78C6C;"> 0</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-light-font-style:italic;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">  return</span><span style="--shiki-light:#82AAFF;--shiki-dark:#82AAFF;"> parseFloat</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">(</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">val</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">)</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;">let</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> lazyToCalc </span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#FF9CAC;--shiki-dark:#FF9CAC;"> false</span><span style="--shiki-light:#676E95;--shiki-light-font-style:italic;--shiki-dark:#676E95;--shiki-dark-font-style:italic;"> // 延迟执行</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#676E95;--shiki-light-font-style:italic;--shiki-dark:#676E95;--shiki-dark-font-style:italic;">// 计算内容省略</span></span>
<span class="line"><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;">async</span><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;"> function</span><span style="--shiki-light:#82AAFF;--shiki-dark:#82AAFF;"> calcEll</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">()</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-light-font-style:italic;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">  await</span><span style="--shiki-light:#82AAFF;--shiki-dark:#82AAFF;"> nextTick</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">()</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-light-font-style:italic;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">  if</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;"> (</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">!</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">contentEl</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">value</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">) </span><span style="--shiki-light:#89DDFF;--shiki-light-font-style:italic;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">return</span></span>
<span class="line"><span style="--shiki-light:#676E95;--shiki-light-font-style:italic;--shiki-dark:#676E95;--shiki-dark-font-style:italic;">  // 计算最大高度</span></span>
<span class="line"><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;">  const</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> {</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> lineHeight</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> }</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> =</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> window</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#82AAFF;--shiki-dark:#82AAFF;">getComputedStyle</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">(</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">contentEl</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">value</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">)</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-light-font-style:italic;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">  if</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;"> (</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">Number</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#82AAFF;--shiki-dark:#82AAFF;">isNaN</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">(</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">lineHeight</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">)) </span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">{</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">    console</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#82AAFF;--shiki-dark:#82AAFF;">warn</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">(</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">\`</span><span style="--shiki-light:#C3E88D;--shiki-dark:#C3E88D;">text-ellipsis 组件不能设置line-height为</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">\${</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">lineHeight</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">}\`</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">)</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">  }</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">  maxHeight</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">value</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> =</span><span style="--shiki-light:#82AAFF;--shiki-dark:#82AAFF;"> toNum</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">(</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">lineHeight</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">) </span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">*</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> props</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">rows</span></span>
<span class="line"><span style="--shiki-light:#676E95;--shiki-light-font-style:italic;--shiki-dark:#676E95;--shiki-dark-font-style:italic;">  // 判断是否省略内容</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">  isEll</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">value</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> =</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> contentEl</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">value</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">scrollHeight</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> &gt;</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> maxHeight</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">value</span></span>
<span class="line"><span style="--shiki-light:#676E95;--shiki-light-font-style:italic;--shiki-dark:#676E95;--shiki-dark-font-style:italic;">  // 计算占位符高度: 容器高度 - 操作按钮高度</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-light-font-style:italic;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">  if</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;"> (</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">isEll</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">value</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">) </span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">{</span></span>
<span class="line"><span style="--shiki-light:#676E95;--shiki-light-font-style:italic;--shiki-dark:#676E95;--shiki-dark-font-style:italic;">    // 延迟执行,解决内容已经展开时,触发计算,tailEl容器展开时的高度与收起时高度不一致,导致错位</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-light-font-style:italic;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">    if</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;"> (</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">isExpand</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">value</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">) </span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">{</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">      lazyToCalc</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> =</span><span style="--shiki-light:#FF9CAC;--shiki-dark:#FF9CAC;"> true</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-light-font-style:italic;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">      return</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">    }</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-light-font-style:italic;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">    await</span><span style="--shiki-light:#82AAFF;--shiki-dark:#82AAFF;"> nextTick</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">()</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-light-font-style:italic;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">    if</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;"> (</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">tailEl</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">value</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">) </span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">{</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">      placeholderHeight</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">value</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> =</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> maxHeight</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">value</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> -</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> tailEl</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">value</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">offsetHeight</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">    }</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">  }</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#676E95;--shiki-light-font-style:italic;--shiki-dark:#676E95;--shiki-dark-font-style:italic;">// 展开/收起点击</span></span>
<span class="line"><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;">function</span><span style="--shiki-light:#82AAFF;--shiki-dark:#82AAFF;"> onActionClick</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">()</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">  isExpand</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">value</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> =</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> !</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">isExpand</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">value</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-light-font-style:italic;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">  if</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;"> (</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">lazyToCalc</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">) </span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">{</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">    lazyToCalc</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> =</span><span style="--shiki-light:#FF9CAC;--shiki-dark:#FF9CAC;"> false</span></span>
<span class="line"><span style="--shiki-light:#82AAFF;--shiki-dark:#82AAFF;">    calcEll</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">()</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">  }</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#82AAFF;--shiki-dark:#82AAFF;">onBeforeMount</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">(</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">()</span><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;"> =&gt;</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#82AAFF;--shiki-dark:#82AAFF;">  calcEll</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">()</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">}</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#82AAFF;--shiki-dark:#82AAFF;">watch</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">(</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">()</span><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;"> =&gt;</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> [props</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">content</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> props</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">rows]</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> calcEll)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#82AAFF;--shiki-dark:#82AAFF;">defineExpose</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">(</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">{</span></span>
<span class="line"><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">  update</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> calcEll</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">,</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">}</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">)</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&lt;/</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">script</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&lt;</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">style</span><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;"> lang</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#C3E88D;--shiki-dark:#C3E88D;">less</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;"> scoped</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">.text-ellipsis {</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">  line-height: 1.5;</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">  &amp;.un-expand {</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">    .text-ellipsis-placeholder {</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">      float: right;</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">    }</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">    .text-ellipsis-tail {</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">      float: right;</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">      clear: both;</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">    }</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">  }</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">  &amp;.is-single {</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">    .text-ellipsis-action {</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">      display: block;</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">    }</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">  }</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">}</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">.text-ellipsis-content {</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">  overflow: hidden;</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">  text-overflow: ellipsis;</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">  word-wrap: break-word;</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">  word-break: break-word;</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">  text-justify: inter-character;</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">  text-align: justify;</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">  white-space: pre-line;</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">  // white-space: pre-wrap;</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">}</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">.text-ellipsis-action {</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">  color: #409eff;</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">  cursor: pointer;</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">  &amp;:hover {</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">    opacity: 0.85;</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">  }</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">}</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&lt;/</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">style</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br></div></div><h2 id="ant-design-mobile-的文本省略" tabindex="-1">ant-design-mobile 的文本省略 <a class="header-anchor" href="#ant-design-mobile-的文本省略" aria-label="Permalink to &quot;ant-design-mobile 的文本省略&quot;">​</a></h2><h3 id="实现过程-2" tabindex="-1">实现过程 <a class="header-anchor" href="#实现过程-2" aria-label="Permalink to &quot;实现过程&quot;">​</a></h3><ol><li>克隆文本内容的容器<br> 为什么要克隆呢，直接在原本的容器上操作不行吗？ 直接上答案，因为需要频繁操作 dom，并获取 dom 位置的值，为避免触发多次重绘重排，需要克隆一个样式、大小一样的容器，并设置 fixed 固定布局，插入到 body 下。</li></ol><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes material-theme-palenight material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;">function</span><span style="--shiki-light:#82AAFF;--shiki-dark:#82AAFF;"> cloneBox</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">()</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-light-font-style:italic;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">  if</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;"> (</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">!</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">boxEl</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">value</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">) </span><span style="--shiki-light:#89DDFF;--shiki-light-font-style:italic;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">return</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#676E95;--shiki-light-font-style:italic;--shiki-dark:#676E95;--shiki-dark-font-style:italic;">  // 复制样式</span></span>
<span class="line"><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;">  const</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> originStyle</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> =</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> window</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#82AAFF;--shiki-dark:#82AAFF;">getComputedStyle</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">(</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">boxEl</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">value</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">)</span></span>
<span class="line"><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;">  const</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> div</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> =</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> document</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#82AAFF;--shiki-dark:#82AAFF;">createElement</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">(</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#C3E88D;--shiki-dark:#C3E88D;">div</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">)</span></span>
<span class="line"><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;">  const</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> styleNames</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#FFCB6B;--shiki-dark:#FFCB6B;"> string</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">[] </span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#FFCB6B;--shiki-dark:#FFCB6B;"> Array</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">prototype</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">slice</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#82AAFF;--shiki-dark:#82AAFF;">apply</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">(</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">originStyle</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">)</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">  styleNames</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#82AAFF;--shiki-dark:#82AAFF;">forEach</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">(</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#BABED8;--shiki-light-font-style:italic;--shiki-dark:#BABED8;--shiki-dark-font-style:italic;">name</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;"> =&gt;</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">    div</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">style</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#82AAFF;--shiki-dark:#82AAFF;">setProperty</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">(</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">name</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> originStyle</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#82AAFF;--shiki-dark:#82AAFF;">getPropertyValue</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">(</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">name</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">))</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">  }</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">)</span></span>
<span class="line"><span style="--shiki-light:#676E95;--shiki-light-font-style:italic;--shiki-dark:#676E95;--shiki-dark-font-style:italic;">  // 重置样式</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">  div</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">style</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">position</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> =</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#C3E88D;--shiki-dark:#C3E88D;">fixed</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">  div</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">style</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">zIndex</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> =</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#C3E88D;--shiki-dark:#C3E88D;">-9999</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">  div</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">style</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">top</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> =</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#C3E88D;--shiki-dark:#C3E88D;">-9999px</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">  div</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">style</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">height</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> =</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#C3E88D;--shiki-dark:#C3E88D;">auto</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">  div</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">style</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">minHeight</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> =</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#C3E88D;--shiki-dark:#C3E88D;">auto</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">  div</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">style</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">maxHeight</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> =</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#C3E88D;--shiki-dark:#C3E88D;">auto</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#676E95;--shiki-light-font-style:italic;--shiki-dark:#676E95;--shiki-dark-font-style:italic;">  // 插入body</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">  div</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">textContent</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> =</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> props</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">content</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">  document</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">body</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#82AAFF;--shiki-dark:#82AAFF;">appendChild</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">(</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">div</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">)</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-light-font-style:italic;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">  return</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> div</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><ol start="2"><li>计算容器最大高度<br> 容器设定的最大高度 = 指定行数 * 行高 + 上边距 + 下边距</li></ol><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes material-theme-palenight material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;">const</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> div </span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#82AAFF;--shiki-dark:#82AAFF;"> cloneBox</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">()</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-light-font-style:italic;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">if</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> (</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">!</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">div) </span><span style="--shiki-light:#89DDFF;--shiki-light-font-style:italic;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">return</span></span>
<span class="line"><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;">const</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> {</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> paddingBottom</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> paddingTop</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> lineHeight </span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">}</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> =</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> div</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">style</span></span>
<span class="line"><span style="--shiki-light:#676E95;--shiki-light-font-style:italic;--shiki-dark:#676E95;--shiki-dark-font-style:italic;">// 最大高度: 行高 * 行数 + 上下内边距;</span></span>
<span class="line"><span style="--shiki-light:#676E95;--shiki-light-font-style:italic;--shiki-dark:#676E95;--shiki-dark-font-style:italic;">// 补: 加上 1/2 为了增加最大高度的安全范围</span></span>
<span class="line"><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;">const</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> maxHeight </span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> (props</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">rows </span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">+</span><span style="--shiki-light:#F78C6C;--shiki-dark:#F78C6C;"> 1</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> /</span><span style="--shiki-light:#F78C6C;--shiki-dark:#F78C6C;"> 2</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">) </span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">*</span><span style="--shiki-light:#82AAFF;--shiki-dark:#82AAFF;"> toNum</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">(lineHeight) </span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">+</span><span style="--shiki-light:#82AAFF;--shiki-dark:#82AAFF;"> toNum</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">(paddingTop) </span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">+</span><span style="--shiki-light:#82AAFF;--shiki-dark:#82AAFF;"> toNum</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">(paddingBottom)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ol start="3"><li>计算省略文本<br> 由于计算出了容器设定的最大高度 maxHeight，那么，只要将文本内容填充到容器里，如果容器高度小于 maxHeight，则为文本溢出，否则为未溢出。<br> 如果文本溢出了，就要去计算省略文本的内容是多少，从容器里将文本一个字一个字地拿出来，从末尾开始拿，拿到恰好容器的高度等于 maxHeight，剩下就是省略文本了。为了加快拿的速度，此时可以使用二分法去加快计算的速度。<br> 当然，这里的计算，每次都要在文本末尾加上 <code>...展开</code> 后缀去计算（这个是可配置的，代码是 <code>dot + expandText</code>）。</li></ol><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes material-theme-palenight material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#676E95;--shiki-light-font-style:italic;--shiki-dark:#676E95;--shiki-dark-font-style:italic;">// 内容溢出,则进行文本省略</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-light-font-style:italic;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">if</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> (maxHeight </span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&lt;</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> div</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">offsetHeight) </span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">{</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">  isEll</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">value</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> =</span><span style="--shiki-light:#FF9CAC;--shiki-dark:#FF9CAC;"> true</span></span>
<span class="line"><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;">  const</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> ellText</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> =</span><span style="--shiki-light:#82AAFF;--shiki-dark:#82AAFF;"> calcEllTextEnd</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">(</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">div</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> maxHeight</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">)</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">  text</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">value</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> =</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> ellText</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">}</span><span style="--shiki-light:#89DDFF;--shiki-light-font-style:italic;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> else</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#676E95;--shiki-light-font-style:italic;--shiki-dark:#676E95;--shiki-dark-font-style:italic;">  // 内容未溢出</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">  isEll</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">value</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> =</span><span style="--shiki-light:#FF9CAC;--shiki-dark:#FF9CAC;"> false</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">  text</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">value</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> =</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> props</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">content</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#676E95;--shiki-light-font-style:italic;--shiki-dark:#676E95;--shiki-dark-font-style:italic;">// 计算省略的文本内容(结束位置)</span></span>
<span class="line"><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;">function</span><span style="--shiki-light:#82AAFF;--shiki-dark:#82AAFF;"> calcEllTextEnd</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#BABED8;--shiki-light-font-style:italic;--shiki-dark:#BABED8;--shiki-dark-font-style:italic;">div</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#FFCB6B;--shiki-dark:#FFCB6B;"> HTMLElement</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#BABED8;--shiki-light-font-style:italic;--shiki-dark:#BABED8;--shiki-dark-font-style:italic;"> maxHeight</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#FFCB6B;--shiki-dark:#FFCB6B;"> number</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#676E95;--shiki-light-font-style:italic;--shiki-dark:#676E95;--shiki-dark-font-style:italic;">  // 二分法计算省略时的文本</span></span>
<span class="line"><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;">  const</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> {</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> content</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> dot</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> expandText</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> single</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> }</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> =</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> props</span></span>
<span class="line"><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;">  let</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> l</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> =</span><span style="--shiki-light:#F78C6C;--shiki-dark:#F78C6C;"> 0</span></span>
<span class="line"><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;">  let</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> r</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> =</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> content</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">length</span></span>
<span class="line"><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;">  let</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> res</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> =</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> -</span><span style="--shiki-light:#F78C6C;--shiki-dark:#F78C6C;">1</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-light-font-style:italic;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">  while</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;"> (</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">l</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> &lt;=</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> r</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">) </span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">{</span></span>
<span class="line"><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;">    const</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> mid</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> =</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> Math</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#82AAFF;--shiki-dark:#82AAFF;">floor</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">((</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">l</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> +</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> r</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">) </span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">/</span><span style="--shiki-light:#F78C6C;--shiki-dark:#F78C6C;"> 2</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">)</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">    div</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">textContent</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> =</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> content</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#82AAFF;--shiki-dark:#82AAFF;">slice</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">(</span><span style="--shiki-light:#F78C6C;--shiki-dark:#F78C6C;">0</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> mid</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">) </span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">+</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> dot</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> +</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;"> (</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">single</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> ?</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> &quot;&quot;</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> :</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> expandText</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">)</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-light-font-style:italic;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">    if</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;"> (</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">div</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">offsetHeight</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> &lt;=</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> maxHeight</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">) </span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">{</span></span>
<span class="line"><span style="--shiki-light:#676E95;--shiki-light-font-style:italic;--shiki-dark:#676E95;--shiki-dark-font-style:italic;">      // 未溢出</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">      l</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> =</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> mid</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> +</span><span style="--shiki-light:#F78C6C;--shiki-dark:#F78C6C;"> 1</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">      res</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> =</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> mid</span><span style="--shiki-light:#676E95;--shiki-light-font-style:italic;--shiki-dark:#676E95;--shiki-dark-font-style:italic;"> // 记录满足条件的值</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">    }</span><span style="--shiki-light:#89DDFF;--shiki-light-font-style:italic;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> else</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#676E95;--shiki-light-font-style:italic;--shiki-dark:#676E95;--shiki-dark-font-style:italic;">      // 溢出</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">      r</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> =</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> mid</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> -</span><span style="--shiki-light:#F78C6C;--shiki-dark:#F78C6C;"> 1</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">    }</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">  }</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-light-font-style:italic;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">  return</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> content</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#82AAFF;--shiki-dark:#82AAFF;">slice</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">(</span><span style="--shiki-light:#F78C6C;--shiki-dark:#F78C6C;">0</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> res</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">) </span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">+</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> dot</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><ol start="4"><li>展示在页面</li></ol><div class="language-vue vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki shiki-themes material-theme-palenight material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&lt;</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">template</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">  &lt;</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">div</span><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;"> class</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#C3E88D;--shiki-dark:#C3E88D;">text-ellipsis</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;"> ref</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#C3E88D;--shiki-dark:#C3E88D;">boxEl</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">    {{</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> textVisible</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">    }}&lt;</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">span</span><span style="--shiki-light:#89DDFF;--shiki-light-font-style:italic;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> v-if</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">isEll</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> :</span><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;">class</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">single</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> &amp;&amp; </span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&#39;</span><span style="--shiki-light:#C3E88D;--shiki-dark:#C3E88D;">is-block</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&#39;&quot;</span><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;"> class</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#C3E88D;--shiki-dark:#C3E88D;">text-ellipsis-action</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> @</span><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;">click</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">onActionClick</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&gt;{{</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> actionText </span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">}}&lt;/</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">span</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">  &lt;/</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">div</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&lt;/</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">template</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&lt;</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">script</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;">const</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> actionText </span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#82AAFF;--shiki-dark:#82AAFF;"> computed</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">(</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">()</span><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;"> =&gt;</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-light-font-style:italic;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">  return</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> isExpand</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">value</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> ?</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> props</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">collapseText</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> :</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> props</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">expandText</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">}</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;">const</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> textVisible </span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#82AAFF;--shiki-dark:#82AAFF;"> computed</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">(</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">()</span><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;"> =&gt;</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-light-font-style:italic;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">  return</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> isExpand</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">value</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> ?</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> props</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">content</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> :</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> text</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">value</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">}</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#676E95;--shiki-light-font-style:italic;--shiki-dark:#676E95;--shiki-dark-font-style:italic;">// 展开/收起点击</span></span>
<span class="line"><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;">function</span><span style="--shiki-light:#82AAFF;--shiki-dark:#82AAFF;"> onActionClick</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">()</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">  isExpand</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">value</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> =</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> !</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">isExpand</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">value</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">}</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&lt;/</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">script</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><ol start="5"><li>加上 dom 监听<br> 如果容器的尺寸变化了，计算出的省略文本就不正确了，需要重新计算，这里加上一个 dom 监听即可。</li></ol><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes material-theme-palenight material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#89DDFF;--shiki-light-font-style:italic;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">import</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> ResizeObserver </span><span style="--shiki-light:#89DDFF;--shiki-light-font-style:italic;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">from</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#C3E88D;--shiki-dark:#C3E88D;">resize-observer-polyfill</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">observer </span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> new</span><span style="--shiki-light:#82AAFF;--shiki-dark:#82AAFF;"> ResizeObserver</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">(</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">()</span><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;"> =&gt;</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#82AAFF;--shiki-dark:#82AAFF;">  calcContent</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">()</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">}</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">)</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">observer</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#82AAFF;--shiki-dark:#82AAFF;">observe</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">(boxEl</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">value)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ol start="6"><li>省略的位置 省略的位置可以是在开头、中间、结尾，就要稍微改下省略文本的计算方式。</li><li>优点</li></ol><ul><li>ant-design-mobile 实现方案真的不错</li><li>支持省略位置，可以在开头、中间、结尾</li></ul><ol start="8"><li>缺点</li></ol><ul><li>计算有点复杂，需要耗费一点计算量</li></ul><h2 id="封装-el-tooltip-自动显示隐藏" tabindex="-1">封装 el-tooltip 自动显示隐藏 <a class="header-anchor" href="#封装-el-tooltip-自动显示隐藏" aria-label="Permalink to &quot;封装 el-tooltip 自动显示隐藏&quot;">​</a></h2><div class="language-vue vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki shiki-themes material-theme-palenight material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&lt;</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">script</span><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;"> lang</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#C3E88D;--shiki-dark:#C3E88D;">ts</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;"> setup</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;">interface</span><span style="--shiki-light:#FFCB6B;--shiki-dark:#FFCB6B;"> Props</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">  content</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#FFCB6B;--shiki-dark:#FFCB6B;"> string</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">}</span></span>
<span class="line"><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;">const</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> popos </span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#82AAFF;--shiki-dark:#82AAFF;"> defineProps</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&lt;</span><span style="--shiki-light:#FFCB6B;--shiki-dark:#FFCB6B;">Props</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&gt;</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">()</span></span>
<span class="line"><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;">const</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> disableTip </span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#82AAFF;--shiki-dark:#82AAFF;"> ref</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">(</span><span style="--shiki-light:#FF9CAC;--shiki-dark:#FF9CAC;">true</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">)</span></span>
<span class="line"><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;">const</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> tooltipRef </span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#82AAFF;--shiki-dark:#82AAFF;"> ref</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&lt;</span><span style="--shiki-light:#FFCB6B;--shiki-dark:#FFCB6B;">HTMLDivElement</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&gt;</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">()</span></span>
<span class="line"><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;">async</span><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;"> function</span><span style="--shiki-light:#82AAFF;--shiki-dark:#82AAFF;"> calcEll</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">()</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-light-font-style:italic;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">  await</span><span style="--shiki-light:#82AAFF;--shiki-dark:#82AAFF;"> nextTick</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">()</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-light-font-style:italic;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">  if</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;"> (</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">!</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">tooltipRef</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">value</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">) </span><span style="--shiki-light:#89DDFF;--shiki-light-font-style:italic;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">return</span></span>
<span class="line"><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;">  const</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> {</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> offsetWidth</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> scrollWidth</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> }</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> =</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> tooltipRef</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">value</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">  disableTip</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">value</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> =</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> scrollWidth</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> &lt;=</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> offsetWidth</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">}</span></span>
<span class="line"><span style="--shiki-light:#82AAFF;--shiki-dark:#82AAFF;">onBeforeMount</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">(</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">()</span><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;"> =&gt;</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#82AAFF;--shiki-dark:#82AAFF;">  calcEll</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">()</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">}</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">)</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&lt;/</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">script</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&lt;</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">template</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">  &lt;</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">el-tooltip</span><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;"> effect</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#C3E88D;--shiki-dark:#C3E88D;">dark</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;"> placement</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#C3E88D;--shiki-dark:#C3E88D;">top</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> :</span><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;">disabled</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">disableTip</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;"> v-bind</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">$attrs</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">    &lt;</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">template</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;"> #</span><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;">content</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">      &lt;</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">div</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&gt;{{</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> content </span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">}}&lt;/</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">div</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">    &lt;/</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">template</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">    &lt;</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">div</span><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;"> ref</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#C3E88D;--shiki-dark:#C3E88D;">tooltipRef</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;"> class</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#C3E88D;--shiki-dark:#C3E88D;">tooltip-content</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">      {{</span><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;"> content </span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">}}</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">    &lt;/</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">div</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">  &lt;/</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">el-tooltip</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&lt;/</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">template</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&lt;</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">style</span><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;"> scoped</span><span style="--shiki-light:#C792EA;--shiki-dark:#C792EA;"> lang</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#C3E88D;--shiki-dark:#C3E88D;">less</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">.tooltip-content {</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">  width: 100%;</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">  overflow: hidden;</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">  text-overflow: ellipsis; //文本溢出显示省略号</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">  white-space: nowrap; //文本不会换行</span></span>
<span class="line"><span style="--shiki-light:#BABED8;--shiki-dark:#BABED8;">}</span></span>
<span class="line"><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&lt;/</span><span style="--shiki-light:#F07178;--shiki-dark:#F07178;">style</span><span style="--shiki-light:#89DDFF;--shiki-dark:#89DDFF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div>`,49)])])}const g=i(h,[["render",k]]);export{d as __pageData,g as default};
